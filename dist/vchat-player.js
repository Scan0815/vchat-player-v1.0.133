!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("vchat-core"),require("platform"),require("hls.js")):"function"==typeof define&&define.amd?define(["vchat-core","platform","hls.js"],t):"object"==typeof exports?exports.vchatPlayer=t(require("vchat-core"),require("platform"),require("hls.js")):e.vchatPlayer=t(e["vchat-core"],e.platform,e["hls.js"])}(window,(function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=38)}([function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(20))},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(3);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(2),o=n(6),i=n(22);e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(2),o=n(26),i=n(7),a=n(25),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(i(e),t=a(t,!0),i(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(4);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(t,n){t.exports=e},function(e,t,n){var r=n(0),o=n(31),i=n(1),a=n(14),s=n(35),c=n(58),u=o("wks"),l=r.Symbol,f=c?l:l&&l.withoutSetter||a;e.exports=function(e){return i(u,e)||(s&&i(l,e)?u[e]=l[e]:u[e]=f("Symbol."+e)),u[e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(83);t.BrowserName={ALL:"All",CHROME:"Chrome",FIREFOX:"Firefox",SAFARI:"Safari"},t.BrowserOS={ANDROID:"Android",IOS:"iOS"},t.createElement=function(e,t){var n=document.createElement(e);if(t)for(var r in t)n.style[r]=t[r];return n},t.isBrowserVersion=function(e,n,o,i){n=n||0,i=i||0,(o=o||null)&&(o=o.toLowerCase());var a=null,s=null;(e=e===t.BrowserName.ALL?null:e.toLowerCase())&&r.name&&(a=r.name.toLowerCase()).length>e.length&&(a=a.slice(0,e.length)),o&&r.os&&r.os.family&&(s=r.os.family.toLowerCase()).length>o.length&&(s=s.slice(0,o.length));var c=null===o||s===o,u=null===e||a===e,l=parseInt(r.version,10)>=n,f=0===i||parseInt(r.version,10)<i;return c&&u&&l&&f}},function(e,t,n){var r=n(45),o=n(24);e.exports=function(e){return r(o(e))}},function(e,t,n){var r=n(0),o=n(5);e.exports=function(e,t){try{o(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(31),o=n(14),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t){e.exports={}},function(e,t,n){var r=n(11),o=n(53),i=n(54),a=function(e){return function(t,n,a){var s,c=r(t),u=o(c.length),l=i(a,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.TopLeft=0]="TopLeft",e[e.TopRight=1]="TopRight",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight",e[e.FullScreen=4]="FullScreen"}(t.CameraPosition||(t.CameraPosition={}))},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),s=n(18),c=n(10),u=n(37),l=n(84);t.PlayerEvent={Error:"error",Init:"init",Load:"load",Pause:"pause",Play:"play",Playing:"playing",QualityChange:"qualityChange",Reload:"reload",Waiting:"waiting"},t.PlayModes={PROMISE_PLAY_BUTTON:"uip",PROMISE_PLAY_MUTED:"mpp",PROMISE_PLAY_UNMUTED:"upp",AUTO_PLAY_BUTTON:"ui",AUTO_PLAY_MUTED:"map",AUTO_PLAY_UNMUTED:"uap"};var f={audio:!1,video:{facingMode:"user",width:1920,height:1080}},d=function(){};function p(e){for(var t in e)e[t]=d}var h=function(){function e(e){var t=this;if(this._playing=!1,this._publishing=!1,this._volume=1,this._queue=[],this._player=null,this._factory=null,this._failedFact=[],this._factoryQueue=[],this._allowRearrange=!1,!e.handler)throw new Error("handler must not be undefined.");var n=c.createElement("div",{width:"100%",height:"100%",position:"relative"});e.container.append(n),this._container=n,this._video=e.video,this._playerContainer=c.createElement("div",{width:"100%",height:"100%"}),this._camContainer=c.createElement("div",{backgroundColor:"black",display:"none",position:"absolute"}),n.append(this._playerContainer),n.append(this._camContainer),this._handler=e.handler,this._factoryMap={},this._defOrder=[],e.factories.forEach((function(e){("string"==typeof e.format?[e.format]:e.format).forEach((function(n){void 0===t._factoryMap[n]&&(t._factoryMap[n]=[]),t._factoryMap[n].push(e);var r=t._defOrder.indexOf(n);r>=0&&t._defOrder.splice(r,1),t._defOrder.push(n)}))})),this._allowRearrange=e.preferExistingPlayer||!1,a.logger.log("Player.constructor complete",this._defOrder,this._factoryMap),e.video&&e.video.volume!==this._volume&&(this._volume=e.video.volume,this._handler.onVolumeChange(this._volume))}return e.prototype.initPlayer=function(e){return o(this,void 0,void 0,(function(){var t,n=this;return i(this,(function(r){switch(r.label){case 0:return this._player||0!==this._queue.length?[3,2]:(t="string"==typeof e?[e]:e.slice(),this._queue=t.filter((function(e){var t=Object.prototype.hasOwnProperty.call(n._factoryMap,e);return t&&(t=n._factoryMap[e].filter((function(e){return!n._failedFact.includes(e)})).length>0),t})),this._createFactoryQueue(),[4,this._createPlayer()]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},Object.defineProperty(e.prototype,"format",{get:function(){return this._format},enumerable:!0,configurable:!0}),e.prototype.play=function(e){return o(this,void 0,void 0,(function(){var t,n=this;return i(this,(function(r){switch(r.label){case 0:return this._sourceSet=e,e.preferredOrder&&e.preferredOrder.length>0?this._queue=e.preferredOrder.slice():this._queue=this._defOrder.slice(),this._queue=this._queue.filter((function(t){var r=Object.prototype.hasOwnProperty.call(n._factoryMap,t);return r&&(r=n._factoryMap[t].filter((function(e){return!n._failedFact.includes(e)})).length>0),r&&e[t]&&e[t].length})),a.logger.log("Player.play",e,this._queue),this._player&&this._format&&(0===(t=this._queue.indexOf(this._format))||this._allowRearrange&&t>0)?(this._queue.splice(t,1),this._player.play(e,this._format),[2]):(this._createFactoryQueue(),[4,this._createPlayer()]);case 1:return r.sent(),[2]}}))}))},e.prototype.stop=function(){this._player&&this._player.stop()},Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"publishing",{get:function(){return this._publishing},enumerable:!0,configurable:!0}),e.prototype.publish=function(e){if(!0===this._publishing){if(this._targetSet!==e)throw new Error("cannot publish when still publishing to a different target set. Unpublish first");return!0}if(this._targetSet=e,this._player&&this._player.publish&&this._player.canPublish)this._player.publish(e);else{if(!(e.jpeg&&e.jpeg.length>0))return!1;var t=e.jpeg[0];if(!this._camStream)throw new Error("camera must be started first in order to publish the camera stream");this._camPublisher||(this._camPublisher=this._createCamPublisher(t)),this._camPublisher.publish(t.stream,t.fps),this._publishing=!0,this._handler.onPublishStart&&this._handler.onPublishStart()}return!0},e.prototype.unpublish=function(){this._publishing=!1,this._targetSet=null,this._camPublisher&&(this._camPublisher.stop(),this._camPublisher=null,this._handler.onPublishStop&&this._handler.onPublishStop()),this._player&&this._player.unpublish&&this._player.canPublish&&this._player.unpublish()},e.prototype.hasCamera=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return this._player&&this._player.hasCamera&&this._player.canPublish?[4,this._player.hasCamera()]:[3,2];case 1:return[2,e.sent()];case 2:return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?[4,navigator.mediaDevices.enumerateDevices()]:[3,4];case 3:return[2,e.sent().some((function(e){return"videoinput"===e.kind}))];case 4:return[2,!1]}}))}))},e.prototype.startCamera=function(e){return o(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return this._camConfig=e||{},this._player&&this._player.startCamera&&this._player.canPublish?(this._player.startCamera(e),[3,5]):[3,1];case 1:return this._camVideo?(this._updateCameraPosition(),this._updateCameraSize(),this._handler.onCameraOn&&this._handler.onCameraOn(),[3,5]):[3,2];case 2:return r.trys.push([2,4,,5]),[4,this._getUserMedia(f)];case 3:return t=r.sent(),this._createCamVideo(t),[3,5];case 4:return(n=r.sent()).name&&(n.name.startsWith("Permission")||"NotAllowedError"===n.name)?this._handler.onCameraDenied&&this._handler.onCameraDenied():this._handler.onCameraOff&&this._handler.onCameraOff(),[3,5];case 5:return[2]}}))}))},e.prototype.stopCamera=function(){this._camConfig=null,this._camVideo&&(this._camStream&&(this._camStream.getVideoTracks&&this._camStream.getVideoTracks()?this._camStream.getVideoTracks().forEach((function(e){return e.stop()})):this._camStream.stop&&this._camStream.stop(),this._camStream=null),this._camContainer.style.display="none",this._camContainer.removeChild(this._camVideo),void 0!==this._camVideo?this._camVideo.srcObject=null:this._camVideo.src="",this._camVideo=null,this._handler.onCameraOff&&this._handler.onCameraOff()),window.removeEventListener("resize",this),this._player&&this._player.stopCamera&&this._player.canPublish&&this._player.stopCamera()},Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(e){e=Math.min(Math.max(e,0),1),this._player&&this._player.setVolume(e),this._volume!==e&&(this._volume=e,this._handler.onVolumeChange&&this._handler.onVolumeChange(e))},enumerable:!0,configurable:!0}),e.prototype.playNext=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return this._destroyPlayer(),[4,this._createPlayer()];case 1:return e.sent(),[2]}}))}))},e.prototype.destroy=function(){a.logger.log("Player.destroy"),this.unpublish(),this.stopCamera(),this._destroyPlayer();var e=this._container.parentNode;return e&&e.removeChild(this._container),this._video},e.prototype.handleEvent=function(e){"resize"===e.type&&this._updateCameraSize()},e.prototype._createFactoryQueue=function(){var e=this;this._queue.map((function(t){void 0!==e._factoryMap[t]&&e._factoryMap[t].map((function(n){e._factoryQueue.push({format:t,factory:n})}))}))},e.prototype._createPlayer=function(){return o(this,void 0,void 0,(function(){var e,t,n,r,o,s=this;return i(this,(function(c){switch(c.label){case 0:e=null,t=this._factoryQueue.shift(),n=function(){var n,o,c,u,l,f,d;return i(this,(function(i){switch(i.label){case 0:if(e=t.format,r._player){if(r._format===e)return[2,{value:Promise.resolve()}];r._destroyPlayer()}if(n=t.factory,r._factory=n,!n||r._failedFact.includes(n)||!n.isSupported())return[3,7];r._format=e,r._handler.onPlayerSwitch&&r._handler.onPlayerSwitch(e),i.label=1;case 1:i.trys.push([1,6,,7]),o=r._createCallbacks(n),c=n.create(o,r._video),u=function(){return s._factory===n&&s._format===e},i.label=2;case 2:return i.trys.push([2,4,,5]),[4,c];case 3:return l=i.sent(),u()?(r._installPlayer(l),[2,{value:Promise.resolve()}]):(p(o),[3,5]);case 4:return f=i.sent(),a.logger.warn("Player._createPlayer Promise.catch",f),r._failedFact.push(n),p(o),u()?(r._destroyPlayer(),[2,{value:r._createPlayer()}]):[2,{value:Promise.resolve()}];case 5:return[3,7];case 6:return d=i.sent(),a.logger.warn("Player._createPlayer error",d),[3,7];case 7:return t=r._factoryQueue.shift(),[2]}}))},r=this,c.label=1;case 1:return t?[5,n()]:[3,3];case 2:return"object"==typeof(o=c.sent())?[2,o.value]:[3,1];case 3:return[2]}}))}))},e.prototype._getUserMedia=function(e){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(e):navigator.getUserMedia?new Promise((function(t,n){navigator.getUserMedia(e,(function(e){t(e)}),(function(e){n(e)}))})):navigator.webkitGetUserMedia?new Promise((function(t,n){navigator.webkitGetUserMedia(e,(function(e){t(e)}),(function(e){n(e)}))})):Promise.reject(new Error("No GetUserMedia API available"))},e.prototype._installPlayer=function(e){this._player=e;for(var n=0,r=e.el;n<r.length;n++){var o=r[n];o&&this._playerContainer.append(o)}this._handler.onPlayerSwitchComplete&&this._handler.onPlayerSwitchComplete(this._format),this._callbacks.onSendMetrics(t.PlayerEvent.Init),e.setVolume(this._volume),this._sourceSet&&e.play(this._sourceSet,this._format)},e.prototype._createCallbacks=function(e){var n=this;return this._callbacks={onVolumeChange:function(e){n._volume!==e&&n._handler.onVolumeChange&&(n._volume=e,n._handler.onVolumeChange(e))},onError:function(r){n._callbacks.onSendMetrics(t.PlayerEvent.Error,{error:r}),a.logger.warn("Player.onPlayerError",r),n._playing=!1,n._failedFact.push(e),n.playNext()},onSendMetrics:function(e,t){void 0===t&&(t=null),null===t&&(t={});var o=r({playerEvent:e,playerFormat:n._format,playerType:n._player?n._player.name:""},t),i=navigator.connection||navigator.mozConnection||navigator.webkitConnection||navigator.msConnection||{};if(i){for(var a={},s=0,c=["downlink","downlinkMax","effectiveType","rtt","type"];s<c.length;s++){var u=c[s];i[u]&&(a[u]=i[u])}o.networkInfo=a}n._handler.onSendMetrics&&n._handler.onSendMetrics(o)},onPlayStart:function(e){n._callbacks.onSendMetrics(t.PlayerEvent.Play),n._handler.onPlayStart&&n._handler.onPlayStart(e)},onPlayStop:function(){n._callbacks.onSendMetrics(t.PlayerEvent.Pause),n._playing=!1,n._handler.onPlayStop&&n._handler.onPlayStop()},onPlayInfo:function(e){n._handler.onPlayInfo&&n._handler.onPlayInfo(e)},onPlayError:function(e,r){n._callbacks.onSendMetrics(t.PlayerEvent.Error,{error:r}),n._handler.onPlayError&&n._handler.onPlayError(e)},onCameraOn:function(){n._handler.onCameraOn&&n._handler.onCameraOn()},onCameraOff:function(){n._handler.onCameraOff&&n._handler.onCameraOff()},onCameraDenied:function(){n._handler.onCameraDenied&&n._handler.onCameraDenied()},onPublishStart:function(){n._handler.onPublishStart&&n._handler.onPublishStart()},onPublishStop:function(){n._handler.onPublishStop&&n._handler.onPublishStop()}}},e.prototype._destroyPlayer=function(){a.logger.log("Player._destroyPlayer",this._player,this._format);var e=this._player;if(e){var t=e.destroy();t&&(this._video=t);for(var n=0,r=e.el;n<r.length;n++){var o=r[n];o&&o.parentNode===this._playerContainer&&o.remove()}}this._callbacks&&p(this._callbacks),this._player=null,this._callbacks=null,this._factory=null,this._format=null,this._playing=!1},e.prototype._createCamVideo=function(e){var t=this;a.logger.log("Player.getUserMedia success getCapabilities",e),this._camStream=e;var n=this._camVideo;n||((n=c.createElement("video",{width:"100%",height:"100%",border:"none"})).muted=!0,n.volume=0,n.autoplay=!0,n.setAttribute("playsinline","true"),this._camContainer.append(n)),this._camVideo=n,void 0!==n.srcObject?n.srcObject=e:n.src=URL.createObjectURL(e),n.onloadedmetadata=function(){n.videoWidth&&(t._camContainer.style.display="block",t._updateCameraPosition(),t._updateCameraSize(),window.addEventListener("resize",t),t._handler.onCameraOn&&t._handler.onCameraOn())}},e.prototype._updateCameraPosition=function(){var e=this._camContainer.style;["top","left","right","bottom"].forEach((function(t){return e.removeProperty(t)}));switch(this._camConfig.position){case s.CameraPosition.FullScreen:e.top="0px",e.left="0px";break;case s.CameraPosition.BottomRight:e.bottom="10px",e.right="10px";break;case s.CameraPosition.BottomLeft:e.bottom="10px",e.left="10px";break;case s.CameraPosition.TopRight:e.top="10px",e.right="10px";break;case s.CameraPosition.TopLeft:default:e.top="10px",e.left="10px"}},e.computeCam2CamVideoSize=function(e,t,n){var r=0,o=0,i=n.clientWidth,a=n.clientHeight;if(e.position===s.CameraPosition.FullScreen)return[i,a];if(e.width)r=e.width,o=Math.round(r/t);else if(e.height)o=e.height,r=Math.round(o*t);else{var c=e.widthRatio||3.5,u=e.heightRatio||2,l=Math.floor(Math.min(i/c/80,a/u/(80/t)));r=l>2?80*l:160,o=Math.round(r/t)}return[r,o]},e.prototype._updateCameraSize=function(){if(this._camVideo){var t=this._camVideo.videoWidth/this._camVideo.videoHeight,n=e.computeCam2CamVideoSize(this._camConfig,t,this._container),r=n[0],o=n[1],i=this._camContainer.style;i.width=r+"px",i.height=o+"px"}},e.prototype._createCamPublisher=function(e){var t=this,n={width:e.width,height:e.height,quality:e.quality},r=new l.VideoElementFrameProvider(this._camVideo,n,(function(e){a.logger.warn("Player.PicUpStream.onError",e),t.unpublish()}));return new a.PicUpStream(r)},e.VERSION=u.VERSION,e}();t.Player=h},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(2),o=n(44),i=n(22),a=n(11),s=n(25),c=n(1),u=n(26),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=a(e),t=s(t,!0),u)try{return l(e,t)}catch(e){}if(c(e,t))return i(!o.f.call(e,t),e[t])}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(2),o=n(3),i=n(27);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(0),o=n(4),i=r.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){var r=n(0),o=n(5),i=n(1),a=n(12),s=n(29),c=n(46),u=c.get,l=c.enforce,f=String(String).split("String");(e.exports=function(e,t,n,s){var c=!!s&&!!s.unsafe,u=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||i(n,"name")||o(n,"name",t),l(n).source=f.join("string"==typeof t?t:"")),e!==r?(c?!d&&e[t]&&(u=!0):delete e[t],u?e[t]=n:o(e,t,n)):u?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},function(e,t,n){var r=n(30),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return o.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r=n(0),o=n(12),i=r["__core-js_shared__"]||o("__core-js_shared__",{});e.exports=i},function(e,t,n){var r=n(48),o=n(30);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.4",mode:r?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(51),o=n(0),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e])||i(o[e]):r[e]&&r[e][t]||o[e]&&o[e][t]}},function(e,t,n){var r=n(1),o=n(11),i=n(16).indexOf,a=n(15);e.exports=function(e,t){var n,s=o(e),c=0,u=[];for(n in s)!r(a,n)&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~i(u,n)||u.push(n));return u}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(3);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Info=0]="Info",e[e.Critical=10]="Critical"}(t.ErrorLevel||(t.ErrorLevel={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION="1.0.133"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(39);var r=n(18);t.CameraPosition=r.CameraPosition;var o=n(81);t.DummyPlayerFactory=o.DummyPlayerFactory;var i=n(82);t.HlsJsPlayerFactory=i.HlsJsPlayerFactory;var a=n(86);t.HlsPlayerFactory=a.HlsPlayerFactory;var s=n(87);t.JpegPlayerFactory=s.JpegPlayerFactory;var c=n(19);t.Player=c.Player;var u=n(88);t.PlayerFactoryLoader=u.PlayerFactoryLoader;var l=n(89);t.RtmpPlayerFactory=l.RtmpPlayerFactory;var f=n(37);t.VERSION=f.VERSION;var d=n(91);t.WebRTCPlayerFactory=d.WebRTCPlayerFactory},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(40),n(78),n(79),n(80)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(41),n(67)},function(e,t,n){n(42);var r=n(64);e.exports=r("Array","includes")},function(e,t,n){"use strict";var r=n(43),o=n(16).includes,i=n(57);r({target:"Array",proto:!0,forced:!n(63)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},function(e,t,n){var r=n(0),o=n(21).f,i=n(5),a=n(28),s=n(12),c=n(49),u=n(56);e.exports=function(e,t){var n,l,f,d,p,h=e.target,y=e.global,m=e.stat;if(n=y?r:m?r[h]||s(h,{}):(r[h]||{}).prototype)for(l in t){if(d=t[l],f=e.noTargetGet?(p=o(n,l))&&p.value:n[l],!u(y?l:h+(m?".":"#")+l,e.forced)&&void 0!==f){if(typeof d==typeof f)continue;c(d,f)}(e.sham||f&&f.sham)&&i(d,"sham",!0),a(n,l,d,e)}}},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);t.f=i?function(e){var t=o(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(3),o=n(23),i="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},function(e,t,n){var r,o,i,a=n(47),s=n(0),c=n(4),u=n(5),l=n(1),f=n(13),d=n(15),p=s.WeakMap;if(a){var h=new p,y=h.get,m=h.has,v=h.set;r=function(e,t){return v.call(h,e,t),t},o=function(e){return y.call(h,e)||{}},i=function(e){return m.call(h,e)}}else{var g=f("state");d[g]=!0,r=function(e,t){return u(e,g,t),t},o=function(e){return l(e,g)?e[g]:{}},i=function(e){return l(e,g)}}e.exports={set:r,get:o,has:i,enforce:function(e){return i(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var r=n(0),o=n(29),i=r.WeakMap;e.exports="function"==typeof i&&/native code/.test(o(i))},function(e,t){e.exports=!1},function(e,t,n){var r=n(1),o=n(50),i=n(21),a=n(6);e.exports=function(e,t){for(var n=o(t),s=a.f,c=i.f,u=0;u<n.length;u++){var l=n[u];r(e,l)||s(e,l,c(t,l))}}},function(e,t,n){var r=n(32),o=n(52),i=n(55),a=n(7);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(0);e.exports=r},function(e,t,n){var r=n(33),o=n(17).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(34),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(34),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(3),o=/#|\.prototype\./,i=function(e,t){var n=s[a(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},a=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";e.exports=i},function(e,t,n){var r=n(9),o=n(59),i=n(6),a=r("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),e.exports=function(e){s[a][e]=!0}},function(e,t,n){var r=n(35);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r,o=n(7),i=n(60),a=n(17),s=n(15),c=n(62),u=n(27),l=n(13),f=l("IE_PROTO"),d=function(){},p=function(e){return"<script>"+e+"<\/script>"},h=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;h=r?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=u("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var n=a.length;n--;)delete h.prototype[a[n]];return h()};s[f]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(d.prototype=o(e),n=new d,d.prototype=null,n[f]=e):n=h(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(2),o=n(6),i=n(7),a=n(61);e.exports=r?Object.defineProperties:function(e,t){i(e);for(var n,r=a(t),s=r.length,c=0;s>c;)o.f(e,n=r[c++],t[n]);return e}},function(e,t,n){var r=n(33),o=n(17);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(32);e.exports=r("document","documentElement")},function(e,t,n){var r=n(2),o=n(3),i=n(1),a=Object.defineProperty,s={},c=function(e){throw e};e.exports=function(e,t){if(i(s,e))return s[e];t||(t={});var n=[][e],u=!!i(t,"ACCESSORS")&&t.ACCESSORS,l=i(t,0)?t[0]:c,f=i(t,1)?t[1]:void 0;return s[e]=!!n&&!o((function(){if(u&&!r)return!0;var e={length:-1};u?a(e,1,{enumerable:!0,get:c}):e[1]=1,n.call(e,l,f)}))}},function(e,t,n){var r=n(0),o=n(65),i=Function.call;e.exports=function(e,t,n){return o(i,r[e].prototype[t],n)}},function(e,t,n){var r=n(66);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){n(68)},function(e,t,n){"use strict";var r=n(69),o=n(16).includes,i=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r,o=n(70),i=n(2),a=n(0),s=n(4),c=n(1),u=n(71),l=n(5),f=n(28),d=n(6).f,p=n(73),h=n(76),y=n(9),m=n(14),v=a.Int8Array,g=v&&v.prototype,w=a.Uint8ClampedArray,b=w&&w.prototype,_=v&&p(v),S=g&&p(g),P=Object.prototype,C=P.isPrototypeOf,E=y("toStringTag"),O=m("TYPED_ARRAY_TAG"),T=o&&!!h&&"Opera"!==u(a.opera),M=!1,x={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},k=function(e){return s(e)&&c(x,u(e))};for(r in x)a[r]||(T=!1);if((!T||"function"!=typeof _||_===Function.prototype)&&(_=function(){throw TypeError("Incorrect invocation")},T))for(r in x)a[r]&&h(a[r],_);if((!T||!S||S===P)&&(S=_.prototype,T))for(r in x)a[r]&&h(a[r].prototype,S);if(T&&p(b)!==S&&h(b,S),i&&!c(S,E))for(r in M=!0,d(S,E,{get:function(){return s(this)?this[O]:void 0}}),x)a[r]&&l(a[r],O,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:T,TYPED_ARRAY_TAG:M&&O,aTypedArray:function(e){if(k(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(h){if(C.call(_,e))return e}else for(var t in x)if(c(x,r)){var n=a[t];if(n&&(e===n||C.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(i){if(n)for(var r in x){var o=a[r];o&&c(o.prototype,e)&&delete o.prototype[e]}S[e]&&!n||f(S,e,n?t:T&&g[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,o;if(i){if(h){if(n)for(r in x)(o=a[r])&&c(o,e)&&delete o[e];if(_[e]&&!n)return;try{return f(_,e,n?t:T&&v[e]||t)}catch(e){}}for(r in x)!(o=a[r])||o[e]&&!n||f(o,e,t)}},isView:function(e){var t=u(e);return"DataView"===t||c(x,t)},isTypedArray:k,TypedArray:_,TypedArrayPrototype:S}},function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(e,t,n){var r=n(72),o=n(23),i=n(9)("toStringTag"),a="Arguments"==o(function(){return arguments}());e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:a?o(t):"Object"==(r=o(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,n){var r={};r[n(9)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){var r=n(1),o=n(74),i=n(13),a=n(75),s=i("IE_PROTO"),c=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=o(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},function(e,t,n){var r=n(24);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(3);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){var r=n(7),o=n(77);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return r(n),o(i),t?e.call(n,i):n.__proto__=i,n}}():void 0)},function(e,t,n){var r=n(4);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t){[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(e){Object.prototype.hasOwnProperty.call(e,"append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Array.prototype.slice.call(e),r=document.createDocumentFragment();n.forEach((function(e){var t=e instanceof Node;r.appendChild(t?e:document.createTextNode(String(e)))})),this.appendChild(r)}})}))},function(e,t){[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(e){Object.prototype.hasOwnProperty.call(e,"remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})}))},function(e,t){[HTMLCanvasElement.prototype].forEach((function(e){Object.prototype.hasOwnProperty.call(e,"toBlob")||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){var r=this;setTimeout((function(){for(var o=atob(r.toDataURL(t,n).split(",")[1]),i=o.length,a=new Uint8Array(i),s=0;s<i;s++)a[s]=o.charCodeAt(s);e(new Blob([a],{type:t||"image/png"}))}))}})}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),a=function(){function e(e){this.config=e,this.logName="TestPlayerFactory["+e.name+"]"}return Object.defineProperty(e.prototype,"format",{get:function(){return this.config.format},enumerable:!0,configurable:!0}),e.prototype.isSupported=function(){return this.config.supported},e.prototype.create=function(e,t){return r(this,void 0,void 0,(function(){var n,r,i,a=this;return o(this,(function(o){return this.log(".create",t),(n=document.createElement("div")).style.width="100%",n.style.height="100%",r=[],[2,i={el:[n],name:"dummy"+this.config.name,play:function(t,n){a.log(".play",t,n),(r=t[n])&&r.length>0&&e.onPlayStart(r[0]),a.config.raiseErrorAfter>0&&setTimeout((function(){e.onError("breakAfter")}),a.config.raiseErrorAfter)},stop:function(){a.log(".stop"),e.onPlayStop()},destroy:function(){return a.log(".destroy"),i.stop(),null},setVolume:function(e){a.log(".setVolume",e)}}]}))}))},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=[this.logName+("."===e.charAt(0)?"":" ")+e].concat(t);i.logger.log.apply(void 0,r)},e}();t.DummyPlayerFactory=a},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(36),a=n(19),s=n(10),c=n(8),u=n(85),l={low:0,medium:250,good:500},f=function(){function e(e){this.format="hls",this.config=e||{}}return e.prototype.isSupported=function(){return u.isSupported()&&!s.isBrowserVersion(s.BrowserName.SAFARI)&&!s.isBrowserVersion(s.BrowserName.FIREFOX,0,s.BrowserOS.ANDROID,49)&&!s.isBrowserVersion(s.BrowserName.CHROME,0,s.BrowserOS.ANDROID,53)},e.prototype.create=function(e,t){return r(this,void 0,void 0,(function(){var n,r,s,f,d,p,h,y,m,v,g,w,b,_,S,P,C,E,O,T,M,x,k,A,R,I,D,L,j,W,N,F,V,B,U,q,H,z,G,Y,X,J=this;return o(this,(function(o){return n=!1,r=document.createElement("video"),(s=r.play())&&(n=!0,s.catch((function(){}))),f=n?a.PlayModes.PROMISE_PLAY_UNMUTED:a.PlayModes.AUTO_PLAY_UNMUTED,t||((t=document.createElement("video")).volume=1,t.muted=!1),t.crossOrigin="anonymous",t.controls=!1,t.style.width="100%",t.style.height="100%",n||(t.autoplay=!0),this.config.poster&&(t.poster=this.config.poster),d={debug:!1,maxBufferLength:3,maxMaxBufferLength:10,capLevelToPlayerSize:!0},p=null,(this.config.useCanvasPoster||void 0===this.config.useCanvasPoster)&&((p=document.createElement("canvas")).style.position="absolute",p.style.left="-100000px",p.style.top="0"),h="low",y="",m=0,v=null,g=[],w=!1,b=!1,_=!1,S=!1,P=t.volume,C=null,E=null,O=null,T=function(){e.onPlayInfo({width:t.videoWidth,height:t.videoHeight,quality:h,paused:t.paused,volume:t.volume,name:X.name,source:y})},M=function(e){var t="low",n=J.config.qualityBoundaries||l;n.good&&e>=n.good?t="good":n.medium&&e>=n.medium&&(t="medium"),t===h&&e===m||x(t),m=e},x=function(e){h=e,T()},k=function(){v&&v.destroy(),(v=new u(d)).attachMedia(t),v.on(u.Events.LEVEL_SWITCHED,(function(){M(t.videoWidth)})),v.on(u.Events.LEVEL_LOADED,(function(){M(t.videoWidth)})),v.on(u.Events.ERROR,(function(t,n){c.logger.log("Hls.Events.ERROR",n);var r={event:t};if(n.type&&(r.type=n.type),n.fatal&&(r.fatal=!0),n.details&&(r.details=n.details),e.onPlayError(i.ErrorLevel.Info,r),"bufferNudgeOnStall"!=n.details&&(n.details==u.ErrorDetails.FRAG_LOAD_ERROR&&c.logger.log("hls.ErrorDetails.FRAG_LOAD_ERROR"),n.fatal))switch(n.type){case u.ErrorTypes.NETWORK_ERROR:c.logger.log("fatal network error encountered, try to recover"),w=!0,v.startLoad();break;case u.ErrorTypes.MEDIA_ERROR:c.logger.log("fatal media error encountered, try to recover"),v.recoverMediaError();break;default:c.logger.log("fatal error encountered, cannot recover"),v.destroy(),e.onError("media")}})),w=!0,v.loadSource(y)},A=function(){n||(E=setTimeout((function(){S?(q({name:"AutoPlayError",message:"AutoPlay failed"}),R()):H(!0)}),500))},R=function(){var n=0,r="";if(t&&t.error){var o=t.error;n=o.code,r=o.message}n===MediaError.MEDIA_ERR_DECODE||n===MediaError.MEDIA_ERR_NETWORK?(e.onPlayError(i.ErrorLevel.Info,{code:n,message:r}),U()):e.onError({code:n,message:r})},I=function(){b||(e.onSendMetrics(a.PlayerEvent.Pause),w=!1,v.stopLoad(),J.config.userInteractionCallback&&J.config.userInteractionCallback(G))},D=function(n){t&&t.error?R():"string"==typeof n?e.onPlayError(i.ErrorLevel.Info,{message:n}):"object"==typeof n?e.onPlayError(i.ErrorLevel.Info,{name:n.name,message:n.message}):e.onError({code:"1337",message:"Unknown error"})},L=function(){E&&(clearTimeout(E),E=null),w?(e.onSendMetrics(a.PlayerEvent.Playing),T(),C&&clearInterval(C),p&&(C=setInterval(B,25)),O&&(clearTimeout(O),O=null)):U()},j=function(){t.videoWidth>0&&F()},W=function(){b||(e.onSendMetrics(a.PlayerEvent.Waiting),O&&clearTimeout(O),O=setTimeout((function(){x("low")}),J.config.waitingTimeout||3e3))},N=function(){F()},F=function(){p&&(t.videoHeight>0&&(p.height=t.clientHeight,p.width=t.clientWidth),window.requestAnimationFrame(V))},V=function(){if(p&&t.readyState>=2)try{p.getContext("2d").drawImage(t,0,0,t.clientWidth,t.clientHeight)}catch(e){if("NS_ERROR_NOT_AVAILABLE"!==e.name)throw e;setTimeout(V,1)}},B=function(){p&&t.videoWidth&&(p.style.left="-100000px",clearInterval(C),C=null)},U=function(){p&&(p.style.left="0"),O&&clearTimeout(O),O=setTimeout((function(){x("low")}),J.config.waitingTimeout||3e3),setTimeout((function(){k(),H(!1)}),100),e.onSendMetrics(a.PlayerEvent.Load)},t.addEventListener("canplay",A,!0),t.addEventListener("pause",I,!0),t.addEventListener("playing",L,!0),t.addEventListener("timeupdate",j,!0),t.addEventListener("waiting",W,!0),window.addEventListener("resize",N),q=function(n){void 0===n&&(n=null);var r={muted:t.muted,paused:t.paused,volume:t.volume},o={playMode:f,success:!n,videoElement:r,volume:P};n&&(o.error=n.name,o.errorMsg=n.message),e.onSendMetrics(a.PlayerEvent.Play,o),J.config.playLogger&&J.config.playLogger(o)},H=function(r,o){void 0===r&&(r=!1),void 0===o&&(o=!1),n?t.play().then((function(){q()})).catch((function(n){q(n),"NotAllowedError"===n.name||"AbortError"===n.name?o?D(n):"AbortError"!=n.name||_?t.muted?J.config.userInteractionCallback?(f=a.PlayModes.PROMISE_PLAY_BUTTON,J.config.userInteractionCallback(z)):D("No userInteractionCallback set"):(P=0,t.muted=!0,t.volume=0,f=a.PlayModes.PROMISE_PLAY_MUTED,e.onVolumeChange(0),H()):(_=!0,setTimeout((function(){H()}),50)):D(n)})):r?(q({name:"AutoPlayError",message:"AutoPlay failed"}),t.muted?J.config.userInteractionCallback?(f=a.PlayModes.AUTO_PLAY_BUTTON,J.config.userInteractionCallback(z)):D("No userInteractionCallback set"):(P=0,t.muted=!0,t.volume=0,f=a.PlayModes.AUTO_PLAY_MUTED,e.onVolumeChange(0),t.play())):t.play()},z=function(n){n&&n.cancelable&&(n.preventDefault(),n.stopPropagation()),P=1,t.muted=!1,t.volume=1,e.onVolumeChange(1),H(!1,!0),S=!0},G=function(e){e&&e.cancelable&&(e.preventDefault(),e.stopPropagation()),U()},Y=function(){var t=g.shift();t?(y=t.stream,k(),e.onPlayStart(t),T(),H()):e.onError("source")},[2,X={el:[t,p],name:"HLSJS",play:function(e){g=e.hls?e.hls.slice():[],Y(),b&&(b=!1)},stop:function(){p&&(p.style.left="0"),t.pause(),v.stopLoad(),e.onPlayStop(),w=!1,b=!0},destroy:function(){return t.removeEventListener("canplay",A,!0),t.removeEventListener("pause",I,!0),t.removeEventListener("playing",L,!0),t.removeEventListener("timeupdate",j,!0),t.removeEventListener("waiting",W,!0),window.removeEventListener("resize",N),C&&clearInterval(C),X.stop(),v.destroy(),t.crossOrigin=null,t.controls=!1,t.style.width=null,t.style.height=null,t.removeAttribute("autoplay"),t},setVolume:function(e){P=e,t.volume=e,t.muted=!e}}]}))}))},e}();t.HlsJsPlayerFactory=f},function(e,n){e.exports=t},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n){if(this._canvas=document.createElement("canvas"),!e)throw new Error("videoElement must not be undefined");this._errorCallback=n,this._videoElement=e,this._jpegUploadSettings=t;var r=e.srcObject.getVideoTracks()[0].getSettings(),o=r.aspectRatio||r.width/r.height;this._canvas.width=this._jpegUploadSettings.width,this._canvas.height=this._jpegUploadSettings.width/o}return e.prototype.getSnapshot=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){return this._canvas.getContext("2d").drawImage(this._videoElement,0,0,this._canvas.width,this._canvas.height),[2,new Promise((function(t){return e._canvas.toBlob(t,"image/jpeg",e._jpegUploadSettings.quality)}))]}))}))},e.prototype.onError=function(e){this._errorCallback&&this._errorCallback(e)},e}();t.VideoElementFrameProvider=i},function(e,t){e.exports=n},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(36),a=n(19),s=n(10),c={low:0,medium:250,good:500},u=function(){function e(e){this.format="hls",this.config=e||{}}return e.prototype.isSupported=function(){return s.isBrowserVersion(s.BrowserName.SAFARI,10)||s.isBrowserVersion(s.BrowserName.CHROME,53,s.BrowserOS.IOS)||s.isBrowserVersion(s.BrowserName.CHROME,53,s.BrowserOS.ANDROID)},e.prototype.create=function(e,t){return r(this,void 0,void 0,(function(){var n,r,s,u,f,d,p,h,y,m,v,g,w,b,_,S,P,C,E,O,T,M,x,k,A,R,I,D,L,j,W,N,F,V,B,U,q,H,z,G,Y,X,J,Q,K=this;return o(this,(function(o){return n=!1,r=document.createElement("video"),(s=r.play())&&(n=!0,s.catch((function(){}))),u=n?a.PlayModes.PROMISE_PLAY_UNMUTED:a.PlayModes.AUTO_PLAY_UNMUTED,t||((t=document.createElement("video")).volume=1,t.muted=!1),t.crossOrigin="anonymous",t.controls=!1,t.style.width="100%",t.style.height="100%",n||(t.autoplay=!0),this.config.poster&&(t.poster=this.config.poster),t.setAttribute("playsinline","true"),f=null,(this.config.useCanvasPoster||void 0===this.config.useCanvasPoster)&&((f=document.createElement("canvas")).style.position="absolute",f.style.left="-100000px",f.style.top="0"),d="low",p="",h=0,y=[],m=!1,v=!1,g=!1,w=!1,b=t.volume,_=0,S=0,P=null,null,E=null,O=null,T=!1,M=function(){e.onPlayInfo({width:t.videoWidth,height:t.videoHeight,quality:d,volume:t.volume,paused:t.paused,name:Q.name,source:p})},x=function(e){d=e,M()},k=function(e){if(!w){var t="low",n=K.config.qualityBoundaries||c;n.good&&e>=n.good?t="good":n.medium&&e>=n.medium&&(t="medium"),t===d&&e===h||x(t),h=e}},A=function(){n||(E=setTimeout((function(){v?(z({name:"AutoPlayError",message:"AutoPlay failed"}),I()):G(!0)}),500))},R=function(){e.onError("ended")},I=function(){if(!w){var n=0,r="";if(t&&t.error){var o=t.error;n=o.code,r=o.message}n===MediaError.MEDIA_ERR_DECODE||n===MediaError.MEDIA_ERR_NETWORK?(e.onPlayError(i.ErrorLevel.Info,{code:n,message:r}),H()):e.onError({code:n,message:r})}},D=function(){var e=K.config.recoverTimeout||2e3;S>0&&(e*=3),g&&_&&window.performance.now()-e>_&&H()},L=function(){w||(e.onSendMetrics(a.PlayerEvent.Pause),g&&(g=!1,K.config.userInteractionCallback&&K.config.userInteractionCallback(X)))},j=function(n){t&&t.error?I():"string"==typeof n?e.onPlayError(i.ErrorLevel.Info,{message:n}):"object"==typeof n?e.onPlayError(i.ErrorLevel.Info,{name:n.name,message:n.message}):e.onError({code:"1337",message:"Unknown error"})},W=function(){g=!0,E&&(clearTimeout(E),E=null),e.onSendMetrics(a.PlayerEvent.Playing),M(),P&&clearInterval(P),f&&(P=setInterval(q,25)),O&&(window.clearTimeout(O),O=null),T&&(t.controls=!1,T=!1)},N=function(){g&&t.videoWidth>0&&(k(t.videoWidth),B(),O&&(clearTimeout(O),O=null),2===S?S=0:S>0&&S++),_=window.performance.now()},F=function(){w||(e.onSendMetrics(a.PlayerEvent.Waiting),O&&clearTimeout(O),O=window.setTimeout((function(){x("low")}),K.config.waitingTimeout||3e3))},V=function(){B()},B=function(){f&&(t.videoHeight>0&&(f.height=t.clientHeight,f.width=t.clientWidth),window.requestAnimationFrame(U))},U=function(){if(f&&t.readyState>=2)try{f.getContext("2d").drawImage(t,0,0,t.clientWidth,t.clientHeight)}catch(e){if("NS_ERROR_NOT_AVAILABLE"!==e.name)throw e;setTimeout(U,1)}},q=function(){f&&t.videoWidth&&(f.style.left="-100000px",clearInterval(P),P=null)},H=function(n,r){void 0===n&&(n=!1),void 0===r&&(r=!1),f&&(f.style.left="0"),O&&clearTimeout(O),O=window.setTimeout((function(){x("low")}),K.config.waitingTimeout||3e3),g=!1,setTimeout((function(){t.load(),G(!1,n)}),100),r?e.onSendMetrics(a.PlayerEvent.Reload):e.onSendMetrics(a.PlayerEvent.Load)},t.addEventListener("canplay",A,!0),t.addEventListener("ended",R,!0),t.addEventListener("error",I,!0),t.addEventListener("pause",L,!0),t.addEventListener("playing",W,!0),t.addEventListener("timeupdate",N,!0),t.addEventListener("waiting",F,!0),window.addEventListener("resize",V),C=setInterval(D,250),z=function(n){void 0===n&&(n=null);var r={muted:t.muted,paused:t.paused,volume:t.volume},o={playMode:u,success:!n,videoElement:r,volume:b};n&&(o.error=n.name,o.errorMsg=n.message),e.onSendMetrics(a.PlayerEvent.Play,o),K.config.playLogger&&K.config.playLogger(o)},G=function(r,o){void 0===r&&(r=!1),void 0===o&&(o=!1),w=!1,S=1,n?t.play().then((function(){z()})).catch((function(n){z(n),"NotAllowedError"===n.name||"AbortError"===n.name?o?j(n):"AbortError"!=n.name||m?t.muted?K.config.userInteractionCallback?(u=a.PlayModes.PROMISE_PLAY_BUTTON,K.config.userInteractionCallback(Y),"NotAllowedError"===n.name&&(j("NotAllowedError: Try controls play"),t.controls=!0,T=!0)):j("No userInteractionCallback set"):(b=0,t.muted=!0,t.volume=0,u=a.PlayModes.PROMISE_PLAY_MUTED,e.onVolumeChange(0),G()):(m=!0,setTimeout((function(){G()}),50)):j(n)})):r?(z({name:"AutoPlayError",message:"AutoPlay failed"}),t.muted?K.config.userInteractionCallback?(u=a.PlayModes.AUTO_PLAY_BUTTON,K.config.userInteractionCallback(Y)):j("No userInteractionCallback set"):(b=0,t.muted=!0,t.volume=0,u=a.PlayModes.AUTO_PLAY_MUTED,e.onVolumeChange(0),t.play())):t.play()},Y=function(n){n&&n.cancelable&&(n.preventDefault(),n.stopPropagation()),b=1,t.muted=!1,t.volume=1,e.onVolumeChange(1),G(!1,!0),v=!0},X=function(e){e&&e.cancelable&&(e.preventDefault(),e.stopPropagation()),H(!0)},J=function(){var n=y.shift();if(n){l(t),e.onPlayStart(n),p=n.stream,M();var r=document.createElement("source");r.src=p,r.type="video/mp4",t.append(r),G()}else e.onError("source")},Q={el:[t,f],name:"HLS_NATIVE",play:function(e){y=e.hls?e.hls.slice():[],J()},stop:function(){g=!1,w=!0,f&&(f.style.left="0"),t.pause(),l(t),t.removeAttribute("src"),t.preload="none";try{t.load()}catch(e){}e.onPlayStop(),O&&(clearTimeout(O),O=null)},destroy:function(){return l(t),t.removeEventListener("ended",R,!0),t.removeEventListener("error",I,!0),t.removeEventListener("canplay",A,!0),t.removeEventListener("pause",L,!0),t.removeEventListener("playing",W,!0),t.removeEventListener("timeupdate",N,!0),t.removeEventListener("waiting",F,!0),window.removeEventListener("resize",V),clearInterval(C),P&&clearInterval(P),Q.stop(),t.crossOrigin=null,t.controls=!1,t.style.width=null,t.style.height=null,t.removeAttribute("autoplay"),t},setVolume:function(e){b=e,t.volume=e,t.muted=!e}},this.config.reloadCallback&&this.config.reloadCallback((function(e){e&&e.cancelable&&(e.preventDefault(),e.stopPropagation()),H(!0,!0)})),[2,Q]}))}))},e}();function l(e){for(var t=e.children.length-1;t>=0;t--)e.removeChild(e.children[t])}t.HlsPlayerFactory=u},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),a=function(){function e(e){this.format="jpeg",this.config=e||{}}return e.prototype.isSupported=function(){return!0},e.prototype.create=function(e){return r(this,void 0,void 0,(function(){var t,n,r,a,s,c,u,l,f,d,p;return o(this,(function(o){return t=document.createElement("audio"),n={"audio/mp3":t.canPlayType&&t.canPlayType("audio/mpeg;codecs=mp3").replace(/no/,""),"audio/ogg":t.canPlayType&&t.canPlayType("audio/ogg").replace(/no/,"")},r=n["audio/mp3"]||n["audio/ogg"],(a=document.createElement("canvas")).style.width="100%",a.style.height="100%",s=!this.config.noAudio&&r,c=!1,u="",l=!0,s&&((f=document.createElement("audio")).autoplay=!0,a.append(f)),d=new i.PicStream((function(t){if(!c){c=!0;var n={width:t.naturalWidth,height:t.naturalHeight,quality:"medium",paused:!1,volume:s?f.volume:0,name:p.name,source:u};e.onPlayInfo(n)}var r=t.width/t.height;a.width!=a.clientWidth&&(a.width=a.clientWidth),a.height!=a.clientHeight&&(a.height=a.clientHeight);var o=0,i=0;r*a.height>a.width?(o=a.width,i=a.width/r):(o=a.height*r,i=a.height);var l=(a.width-o)/2,d=(a.height-i)/2;a.getContext("2d").drawImage(t,0,0,t.width,t.height,l,d,o,i)})),p={el:[a],name:"JPEG",play:function(t){var r,o,a;if(p.stop(),l=!1,(a=t.jpeg)&&a.length>0&&(u=a[0].stream,d.play(u)),s){for(var c=[t.mp3,"audio/mp3",t.vorbis,"audio/ogg"],h=0;h<2;h++)if(o=c[2*h+1],(a=c[2*h])&&a.length>0&&n[o]){r=a[0].stream;var y=document.createElement("source");y.src=r,y.type=c[2*h+1],f.append(y)}var m=f.play();m&&m.catch&&m.catch((function(){f.volume=0,f.muted=!0,e.onVolumeChange(0),i.logger.warn("JpegPlayerFactory audio.play failed")}))}e.onPlayStart(r)},stop:function(){if(l=!0,d.stop(),s)for(f.pause();f.firstChild;)f.removeChild(f.firstChild);c=!1,e.onPlayStop()},destroy:function(){return p.stop(),null},setVolume:function(e){if(s&&!l&&(f.volume=e,f.muted=!e,f.paused)){var t=f.play();t&&t.catch((function(){i.logger.warn("JpegPlayerFactory audio.play failed")}))}}},this.config.initCallback&&this.config.initCallback(s),[2,p]}))}))},e}();t.JpegPlayerFactory=a},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this.format=e,this.loader=t}return e.prototype.isSupported=function(){return!this.factory||this.factory.isSupported()},e.prototype.create=function(e,t){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return this.factory?[2,this.factory.create(e,t)]:(n=this,[4,this.loader()]);case 1:return n.factory=r.sent(),this.factory.create(e,t),[2]}}))}))},e}();t.PlayerFactoryLoader=i},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),a=n(90),s=function(){function e(e){this.format="rtmp",this.config=e||{}}return e.prototype.isSupported=function(){var e=a.flashInfo().major,t=999===e?a.swfFails<=1:a.swfFails<=4&&(e>11||11===e&&a.flashInfo().minor>=3);return window&&window.devicePixelRatio>1&&i.isBrowserVersion(i.BrowserName.FIREFOX)&&(t=!1),t},e.prototype.create=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){return this.config.onPreInit&&this.config.onPreInit(),t=!0,void 0!==this.config.useUpstream&&(t=this.config.useUpstream),[2,new a.RtmpPlayer(e,this.config.swfPath||"player.swf",this.config.timeout||8e3,this.config.onInit||a.dummy,t)]}))}))},e}();t.RtmpPlayerFactory=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(8),i=n(18),a=null;function s(e,t){var n=document.createElement("param");return n.name=e,n.value=t,n}function c(e){t.swfFails=e;var n="player_swf_fails="+t.swfFails;t.swfFails&&(n+="-"+Math.floor(Date.now()/1e3)+";max-age=604800"),n+=";path=/",document.cookie=n}t.flashInfo=function(){if(!a){var e=navigator.userAgent.toLowerCase(),t="Microsoft Internet Explorer"===navigator.appName,n=!1,r=0,o=0,i=/edge\/(\d+)/.exec(navigator.appName);if(!(i&&parseInt(i[1],10)>=15)&&void 0!==navigator.plugins){var s=navigator.plugins["Shockwave Flash"];if("object"==typeof s){n=!0,t=!1,(l=/(\d+)\.(\d+)/.exec(s.description))&&(r=parseInt(l[1],10),o=parseInt(l[2],10))}else{var c=e.includes("windows"),u=e.includes("mac");if(window.chrome&&(c||u))((l=/chrome\/(\d+)/.exec(e))?parseInt(l[1],10):0)>=56&&!/(?:opr|vivaldi|yabrowser|dragon)\//.test(e)&&(n=!0,t=!1,r=999,o=0)}}if(!n)try{var l,f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(f)(l=/(\d+),(\d+)/.exec(f.GetVariable("$version")))&&(t=!0,r=parseInt(l[1],10),o=parseInt(l[2],10))}catch(e){}a={major:r,minor:o,oldIEMode:t}}return a},t.swfFails=(r=/player_swf_fails\s*=\s*(\d+)-(\d+).*/.exec(document.cookie))&&parseInt(r[1],10)||0,t.dummy=function(){};var u=function(){function e(e,n,r,i,a){var u=this;this.name="RTMP",this.canPublish=!0,this.state=0,this.cameraState=0,this.publishState=0,this.queue=[],this.sources=[];var l=function(){var e="",t=99;do{if(0==t--)return null;e="_rtmpPlayer_"+Math.ceil(16777216*Math.random()).toString(16)}while(Object.prototype.hasOwnProperty.call(window,e)&&document.querySelector("#"+e));return e}();if(!l)throw new Error("can't get id");this.cb=e,this.canPublish=a,this.initTimeout=window.setTimeout((function(){0===u.state&&(u.queue.forEach((function(e){e.onFail&&e.onFail()})),u.queue=[],c(t.swfFails+1),e.onError("timeout"))}),r),this.id=l,window[l]={onLog:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.unshift("RtmpPlayer:handler.onLog"),o.logger.log.apply(u,e)},onPreInit:function(){},onInit:function(t){o.logger.log("RtmpPlayer:handler.onInit "+t),c(0),t>=1?(u.state=1,clearTimeout(u.initTimeout),setTimeout((function(){u.state&&(u.queue.forEach((function(e){return e.cmd()})),u.queue=[])}),0),i()):e.onError("incompatible")},onConnect:function(){o.logger.log("RtmpPlayer:handler.onConnect")},onPlay:function(t){o.logger.log("RtmpPlayer:handler.onPlay",t),u.state=2,e.onPlayStart(t)},onStop:function(t){o.logger.log("RtmpPlayer:handler.onStop",t),u.state=1,e.onPlayStop()},onPublish:function(){u.publishState=2,e.onPublishStart()},onUnpublish:function(){u.publishState=0,e.onPublishStop()},onVideoSize:function(e,t){o.logger.log("RtmpPlayer:handler.onVideoSize",e,t),u.videoHeight=t,u.videoWidth=e,u.sendPlayInfo()},onCameraStatus:function(t){o.logger.log("RtmpPlayer:handler.onCameraStatus",t),u.cameraState=t,1===t?e.onCameraOn():0===t?e.onCameraOff():e.onCameraDenied()}};var f="handler="+l;this.swf=function(e,n,r,o){void 0===o&&(o="window");var i={id:e,allowfullscreen:!1,allowscriptaccess:"always",bgcolor:"#000",browserzoom:"noscale",flashvars:r,quality:"high",wmode:o},a=document.createElement("object");for(var c in a.width="100%",a.height="100%",a.id=e,a.name=e,t.flashInfo().oldIEMode?(a.classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",a.append(s("movie",n))):(a.data=n,a.type="application/x-shockwave-flash"),i)a.append(s(c,i[c]));return a}(l,n,f),this.el=[this.swf]}return e.prototype.play=function(e){this.sources=e.rtmp?e.rtmp.slice():[],this.playNext()},e.prototype.stop=function(){var e=this;this.eorq((function(){return e.swf.stop()}))},e.prototype.hasCamera=function(){var e=this;return new Promise((function(t){e.eorq((function(){t(e.swf.hasCamera())}),(function(){t(void 0)}))}))},e.prototype.startCamera=function(e){var t=this;return"object"!=typeof e&&(e={position:e}),e.position||(e.position=i.CameraPosition.TopLeft),new Promise((function(n,r){t.eorq((function(){t.swf.startCamera(e)}),(function(){r()}))}))},e.prototype.stopCamera=function(){var e=this;this.eorq((function(){return e.swf.stopCamera()}))},e.prototype.publish=function(e){var t=this;if(e.rtmp&&e.rtmp.length>0){var n=e.rtmp[0].app,r=e.rtmp[0].stream;return this.publishState=1,this.eorq((function(){return t.swf.publish(n,r)})),!0}return!1},e.prototype.unpublish=function(){var e=this;this.publishState=-1,this.eorq((function(){return e.swf.unpublish()}))},e.prototype.destroy=function(){return clearTimeout(this.initTimeout),2===this.state&&this.stop(),0!==this.publishState&&this.cb.onPublishStop(),0!==this.cameraState&&this.cb.onCameraOff(),window[this.id]=null,null},e.prototype.setVolume=function(e){var t=this;this.eorq((function(){return t.swf.setVolume(e)}))},e.prototype.eorq=function(e,t){0!==this.state?e():this.queue.push({cmd:e,onFail:t})},e.prototype.playNext=function(){var e=this,t=this.sources.shift();t?(this.currentSource=t.stream,this.eorq((function(){return e.swf.play(t.app,t.stream)}))):this.cb.onError("no_source")},e.prototype.sendPlayInfo=function(){this.cb.onPlayInfo({width:this.videoWidth,height:this.videoHeight,quality:"good",volume:this.swf.getVolume(),paused:!1,name:this.name,source:this.currentSource})},e}();t.RtmpPlayer=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(92),o=n(93),i=function(){function e(){this.format="webrtc"}return e.prototype.isSupported=function(){return o.isWebRTCSupported&&"Edge"!==o.browser.name},e.prototype.create=function(e,t){console.log("called create on WebRTCPlayer"),t||((t=document.createElement("video")).muted=!1,t.autoplay=!0),t.crossOrigin="anonymous",t.controls=!1,t.style.width="100%",t.style.height="100%";var n=new r.WebRTCPlayer(t);return Promise.resolve(n)},e}();t.WebRTCPlayerFactory=i},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.name="WebRTC",this.canPublish=!1,this._videoElement=e,e.id="webRTCVideo",this.el=[e]}return e.prototype.play=function(e){var t=e.webrtc[0];this._openSignalingConnection(t.stream)},e.prototype.stop=function(){this._closeDataConnection(),this._closeSignalingConnection()},e.prototype.destroy=function(){return this._closeDataConnection(),this._closeSignalingConnection(),this._videoElement},e.prototype.setVolume=function(e){this._videoElement.volume=e},e.prototype.close=function(){this._socket&&this._socket.close()},e.prototype._closeSignalingConnection=function(){this._socket&&(this._socket.close(),this._socket=null)},e.prototype._openDataConnection=function(){var e=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});e.ontrack=this._attachStreamToVideo.bind(this),e.onconnectionstatechange=this._peerConnectionStateChanged.bind(this),e.onicecandidate=this._iceCandidate.bind(this),this._peerConnection=e},e.prototype._attachStreamToVideo=function(e){console.log("attaching stream"),this._videoElement.id="Playing_web_RTC",this._videoElement.autoplay=!0,console.log(e),this._videoElement.srcObject=e.streams[0]},e.prototype._peerConnectionStateChanged=function(e){console.log("PEER CONNECTION STATE CHANGED")},e.prototype._iceCandidate=function(e){null!=e.candidate?this._sendWebRtcIceCandidate(e.candidate):this._sendWebRtcNoMoreCandidates()},e.prototype._sendWebRtcIceCandidate=function(e){this._dispatchCommand("CMDS_WEBRTC_ICE_CANDIDATE",{ice_candidate:e.candidate,ice_candidate_sdpMLineIndex:e.sdpMLineIndex,ice_candidate_sdpMid:e.sdpMid})},e.prototype._changeStreamQuality=function(e){var t=0;switch(e){case"low":t=2;break;case"medium":t=1;break;case"good":t=0}this._dispatchCommand("CMDS_WEBRTC_CHANGE_QUALITY",{substream:t})},e.prototype._sendWebRtcNoMoreCandidates=function(){this._dispatchCommand("CMDS_WEBRTC_ICE_NO_MORE_CANDIDATES",{})},e.prototype._openSignalingConnection=function(e){var t=this,n=new WebSocket(e);n.onopen=function(e){t._onopen(e)},n.onmessage=this._onmessage.bind(this),n.onerror=this._onerror.bind(this),n.onclose=this._onclose.bind(this),this._socket=n},e.prototype._onopen=function(e){console.log("webrtc - onOpen",e),this._openDataConnection(),this._requestChat()},e.prototype._requestChat=function(){this._dispatchCommand("CMDS_WEBRTC_START")},e.prototype._dispatchCommand=function(e,t){void 0===t&&(t={});var n=JSON.stringify({action:e,params:t});this._socket.send(n)},e.prototype._onmessage=function(e){console.log("webrtc - onMessage",e.data);var t=JSON.parse(e.data);switch(t.action){case"CMDC_WEBRTC_OFFER":this._handleWebRtcOffer(t.params.jsepSdp);break;case"CMDP_NOOP":break;default:console.log("no handler for "+t.action)}console.log(t)},e.prototype._handleWebRtcOffer=function(e){return r(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return[4,this._peerConnection.setRemoteDescription(new RTCSessionDescription({type:"offer",sdp:e}))];case 1:return r.sent(),[4,this._peerConnection.createAnswer()];case 2:return t=r.sent(),[4,this._peerConnection.setLocalDescription(new RTCSessionDescription(t))];case 3:return r.sent(),n=this._peerConnection.localDescription,this._sendWebRtcAnswer(n),[2]}}))}))},e.prototype._sendWebRtcAnswer=function(e){this._dispatchCommand("CMDS_WEBRTC_JSEPANSWER",{jsepType:e.type,jsepSdp:e.sdp})},e.prototype._onerror=function(e){console.log("webrtc - onError",e),this._peerConnection.close()},e.prototype._onclose=function(e){this._closeDataConnection()},e.prototype._closeDataConnection=function(){this._peerConnection&&(this._peerConnection.close(),this._peerConnection=null)},e}();t.WebRTCPlayer=i},function(e,t,n){"use strict";(function(n,r){var o;!function(){var i,a="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";if(P="object"==typeof n&&"object"==typeof n.versions&&n.versions.node&&!n.browser){var s=n.versions.node.toString().replace("v","");a="Nodejs/"+s+" (NodeOS) AppleWebKit/"+s+" (KHTML, like Gecko) Nodejs/"+s+" Nodejs/"+s}i=void 0!==r?r:window,"undefined"==typeof window&&("undefined"==typeof window&&void 0!==r&&(r.navigator={userAgent:a,getUserMedia:function(){}},i.window=r),"undefined"==typeof location&&(i.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(i.screen={width:0,height:0}));var c=window.navigator;void 0!==c?(void 0!==c.webkitGetUserMedia&&(c.getUserMedia=c.webkitGetUserMedia),void 0!==c.mozGetUserMedia&&(c.getUserMedia=c.mozGetUserMedia)):c={getUserMedia:function(){},userAgent:a};var u=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(c.userAgent||""),l=!(-1===c.userAgent.indexOf("Edge")||!c.msSaveOrOpenBlob&&!c.msSaveBlob),f=!!window.opera||c.userAgent.indexOf(" OPR/")>=0,d=void 0!==window.InstallTrigger,p=/^((?!chrome|android).)*safari/i.test(c.userAgent),h=!!window.chrome&&!f,y="undefined"!=typeof document&&!!document.documentMode&&!l;function m(e,t){var n=0,r=!1,o=window.setInterval((function(){e()&&(window.clearInterval(o),t(r)),n++>50&&(window.clearInterval(o),t(r=!0))}),10)}var v={Android:function(){return c.userAgent.match(/Android/i)},BlackBerry:function(){return c.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return c.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return c.userAgent.match(/Opera Mini/i)},Windows:function(){return c.userAgent.match(/IEMobile/i)},any:function(){return v.Android()||v.BlackBerry()||v.iOS()||v.Opera()||v.Windows()},getOsName:function(){var e="Unknown OS";return v.Android()&&(e="Android"),v.BlackBerry()&&(e="BlackBerry"),v.iOS()&&(e="iOS"),v.Opera()&&(e="Opera Mini"),v.Windows()&&(e="Windows"),e}};var g="Unknown OS",w="Unknown OS Version";var b,_,S=function(){for(var e,t=c.appVersion,n=c.userAgent,r="-",o=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],i=0;e=o[i];i++)if(e.r.test(n)){r=e.s;break}var a="-";switch(/Windows/.test(r)&&(/Windows (.*)/.test(r)&&(a=/Windows (.*)/.exec(r)[1]),r="Windows"),r){case"Mac OS X":/Mac OS X (10[\.\_\d]+)/.test(n)&&(a=/Mac OS X (10[\.\_\d]+)/.exec(n)[1]);break;case"Android":/Android ([\.\_\d]+)/.test(n)&&(a=/Android ([\.\_\d]+)/.exec(n)[1]);break;case"iOS":/OS (\d+)_(\d+)_?(\d+)?/.test(n)&&(a=(a=/OS (\d+)_(\d+)_?(\d+)?/.exec(t))[1]+"."+a[2]+"."+(0|a[3]))}return{osName:r,osVersion:a}}();S&&S.osName&&"-"!=S.osName?(g=S.osName,w=S.osVersion):v.any()&&"Android"==(g=v.getOsName())&&(w=!!(_=(b=(b||c.userAgent).toLowerCase()).match(/android\s([0-9\.]*)/))&&_[1]);var P="object"==typeof n&&"object"==typeof n.versions&&n.versions.node;"Unknown OS"===g&&P&&(g="Nodejs",w=n.versions.node.toString().replace("v",""));var C=!1,E=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach((function(e){"undefined"!=typeof document&&"function"==typeof document.createElement&&(!C&&e in document.createElement("canvas")&&(C=!0),!E&&e in document.createElement("video")&&(E=!0))}));var O=/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/,T=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,M=/[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7}/;var x=[],k=[],A=[],R=[];c.mediaDevices&&c.mediaDevices.enumerateDevices&&(c.enumerateDevices=function(e){var t=c.mediaDevices.enumerateDevices();t&&t.then?c.mediaDevices.enumerateDevices().then(e).catch((function(){e([])})):e([])});var I=!1;"undefined"!=typeof MediaStreamTrack&&"getSources"in MediaStreamTrack?I=!0:c.mediaDevices&&c.mediaDevices.enumerateDevices&&(I=!0);var D=!1,L=!1,j=!1,W=!1,N=!1;function F(e){if(I)if(!c.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(c.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!c.enumerateDevices&&c.enumerateDevices&&(c.enumerateDevices=c.enumerateDevices.bind(c)),c.enumerateDevices){x=[],k=[],A=[],R=[],D=!1,L=!1,j=!1,W=!1,N=!1;var t={};c.enumerateDevices((function(n){n.forEach((function(e){var n={};for(var r in e)try{"function"!=typeof e[r]&&(n[r]=e[r])}catch(e){}t[n.deviceId+n.label+n.kind]||("audio"===n.kind&&(n.kind="audioinput"),"video"===n.kind&&(n.kind="videoinput"),n.deviceId||(n.deviceId=n.id),n.id||(n.id=n.deviceId),n.label?("videoinput"!==n.kind||N||(N=!0),"audioinput"!==n.kind||W||(W=!0)):(n.isCustomLabel=!0,"videoinput"===n.kind?n.label="Camera "+(R.length+1):"audioinput"===n.kind?n.label="Microphone "+(k.length+1):"audiooutput"===n.kind?n.label="Speaker "+(A.length+1):n.label="Please invoke getUserMedia once.",void 0!==V&&V.browser.isChrome&&V.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(n.label="HTTPs is required to get label of this "+n.kind+" device.")),"audioinput"===n.kind&&(D=!0,-1===k.indexOf(n)&&k.push(n)),"audiooutput"===n.kind&&(L=!0,-1===A.indexOf(n)&&A.push(n)),"videoinput"===n.kind&&(j=!0,-1===R.indexOf(n)&&R.push(n)),x.push(n),t[n.deviceId+n.label+n.kind]=n)})),void 0!==V&&(V.MediaDevices=x,V.hasMicrophone=D,V.hasSpeakers=L,V.hasWebcam=j,V.isWebsiteHasWebcamPermissions=N,V.isWebsiteHasMicrophonePermissions=W,V.audioInputDevices=k,V.audioOutputDevices=A,V.videoInputDevices=R),e&&e()}))}else e&&e();else e&&e()}var V=window.DetectRTC||{};V.browser=function(){c.appVersion;var e,t,n,r=c.userAgent,o=c.appName,i=""+parseFloat(c.appVersion),a=parseInt(c.appVersion,10);if(p&&!h&&-1!==r.indexOf("CriOS")&&(p=!1,h=!0),f){o="Opera";try{a=(i=c.userAgent.split("OPR/")[1].split(" ")[0]).split(".")[0]}catch(e){i="0.0.0.0",a=0}}else y?((t=r.indexOf("rv:"))>0?i=r.substring(t+3):(t=r.indexOf("MSIE"),i=r.substring(t+5)),o="IE"):h?(t=r.indexOf("Chrome"),o="Chrome",i=r.substring(t+7)):p?(t=r.indexOf("Safari"),o="Safari",i=r.substring(t+7),-1!==(t=r.indexOf("Version"))&&(i=r.substring(t+8)),-1!==c.userAgent.indexOf("Version/")&&(i=c.userAgent.split("Version/")[1].split(" ")[0])):d?(t=r.indexOf("Firefox"),o="Firefox",i=r.substring(t+8)):(e=r.lastIndexOf(" ")+1)<(t=r.lastIndexOf("/"))&&(o=r.substring(e,t),i=r.substring(t+1),o.toLowerCase()===o.toUpperCase()&&(o=c.appName));return l&&(o="Edge",i=c.userAgent.split("Edge/")[1]),-1!==(n=i.search(/[; \)]/))&&(i=i.substring(0,n)),a=parseInt(""+i,10),isNaN(a)&&(i=""+parseFloat(c.appVersion),a=parseInt(c.appVersion,10)),{fullVersion:i,version:a,name:o,isPrivateBrowsing:!1}}(),function(e){var t;try{if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,(function(){t=!1}),(function(e){t=!0}));else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var n;try{(n=window.indexedDB.open("test")).onerror=function(){return!0}}catch(e){t=!0}void 0===t&&m((function(){return"done"===n.readyState}),(function(e){e||(t=!n.result)}))}else if(function(e){var t=e.toLowerCase();if(0===t.indexOf("msie")&&0===t.indexOf("trident"))return!1;var n=/(?:msie|rv:)\s?([\d\.]+)/.exec(t);return!!(n&&parseInt(n[1],10)>=10)}(window.navigator.userAgent)){t=!1;try{window.indexedDB||(t=!0)}catch(e){t=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(e){t=!0}void 0===t&&(t=!1,window.localStorage.removeItem("test"))}}catch(e){t=!1}m((function(){return void 0!==t}),(function(n){e(t)}))}((function(e){V.browser.isPrivateBrowsing=!!e})),V.browser["is"+V.browser.name]=!0,V.osName=g,V.osVersion=w;"object"==typeof n&&"object"==typeof n.versions&&n.versions["node-webkit"];var B=!1;["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach((function(e){B||e in window&&(B=!0)})),V.isWebRTCSupported=B,V.isORTCSupported="undefined"!=typeof RTCIceGatherer;var U=!1;(V.browser.isChrome&&V.browser.version>=35?U=!0:V.browser.isFirefox&&V.browser.version>=34?U=!0:V.browser.isEdge&&V.browser.version>=17?U=!0:"Android"===V.osName&&V.browser.isChrome&&(U=!0),/^(https:|chrome-extension:)$/g.test(location.protocol||""))||("undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(V.browser.isChrome||V.browser.isEdge||V.browser.isOpera)?U=!1:V.browser.isFirefox&&(U=!1));V.isScreenCapturingSupported=U;var q={isSupported:!1,isCreateMediaStreamSourceSupported:!1};["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach((function(e){q.isSupported||e in window&&(q.isSupported=!0,window[e]&&"createMediaStreamSource"in window[e].prototype&&(q.isCreateMediaStreamSourceSupported=!0))})),V.isAudioContextSupported=q.isSupported,V.isCreateMediaStreamSourceSupported=q.isCreateMediaStreamSourceSupported;var H=!1;V.browser.isChrome&&V.browser.version>31&&(H=!0),V.isRtpDataChannelsSupported=H;var z=!1;V.browser.isFirefox&&V.browser.version>28?z=!0:V.browser.isChrome&&V.browser.version>25?z=!0:V.browser.isOpera&&V.browser.version>=11&&(z=!0),V.isSctpDataChannelsSupported=z,V.isMobileDevice=u;var G=!1;c.getUserMedia?G=!0:c.mediaDevices&&c.mediaDevices.getUserMedia&&(G=!0),V.browser.isChrome&&V.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(G="Requires HTTPs"),"Nodejs"===V.osName&&(G=!1),V.isGetUserMediaSupported=G;var Y,X,J,Q="";screen.width&&(Q+=(screen.width?screen.width:"")+" x "+(screen.height?screen.height:""));V.displayResolution=Q,V.displayAspectRatio=(Y=screen.width,X=screen.height,J=function e(t,n){return 0==n?t:e(n,t%n)}(Y,X),Y/J/(X/J)).toFixed(2),V.isCanvasSupportsStreamCapturing=C,V.isVideoSupportsStreamCapturing=E,"Chrome"==V.browser.name&&V.browser.version>=53&&(V.isCanvasSupportsStreamCapturing||(V.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),V.isVideoSupportsStreamCapturing||(V.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features")),V.DetectLocalIPAddress=function(e,t){if(V.isWebRTCSupported){var n=!0,r=!0;!function(e,t){if("undefined"==typeof document||"function"!=typeof document.getElementById)return;var n={},r=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!r){var o=document.getElementById("iframe");if(!o)return;var i=o.contentWindow;r=i.RTCPeerConnection||i.mozRTCPeerConnection||i.webkitRTCPeerConnection}if(!r)return;var a=null;"Chrome"===V.browser&&V.browser.version<58&&(a={optional:[{RtpDataChannels:!0}]});var s=new r({iceServers:[{urls:"stun:stun.l.google.com:19302"}]},a);t&&(s.addStream?s.addStream(t):s.addTrack&&t.getTracks()[0]&&s.addTrack(t.getTracks()[0],t));function c(t){if(t){var r=T.exec(t);if(r){var o=r[1],i=t.match(O);void 0===n[o]&&e(o,i,!0),n[o]=!0}}else e()}if(s.onicecandidate=function(e){e.candidate&&e.candidate.candidate?c(e.candidate.candidate):c()},!t)try{s.createDataChannel("sctp",{})}catch(e){}V.isPromisesSupported?s.createOffer().then((function(e){s.setLocalDescription(e).then(u)})):s.createOffer((function(e){s.setLocalDescription(e,u,(function(){}))}),(function(){}));function u(){s.localDescription.sdp.split("\n").forEach((function(e){e&&0===e.indexOf("a=candidate:")&&c(e)}))}}((function(t){t?t.match(O)?e("Local: "+t,n=!1,r):t.match(M)?e("Public: "+t,n,r=!1):e("Public: "+t,n,r):e()}),t)}},V.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,V.isWebSocketsBlocked=!V.isWebSocketsSupported,"Nodejs"===V.osName&&(V.isWebSocketsSupported=!0,V.isWebSocketsBlocked=!1),V.checkWebSocketsSupport=function(e){e=e||function(){};try{var t,n=new WebSocket("wss://echo.websocket.org:443/");n.onopen=function(){V.isWebSocketsBlocked=!1,t=(new Date).getTime(),n.send("ping")},n.onmessage=function(){V.WebsocketLatency=(new Date).getTime()-t+"ms",e(),n.close(),n=null},n.onerror=function(){V.isWebSocketsBlocked=!0,e()}}catch(t){V.isWebSocketsBlocked=!0,e()}},V.load=function(e){F(e=e||function(){})},V.MediaDevices=void 0!==x?x:[],V.hasMicrophone=D,V.hasSpeakers=L,V.hasWebcam=j,V.isWebsiteHasWebcamPermissions=N,V.isWebsiteHasMicrophonePermissions=W,V.audioInputDevices=k,V.audioOutputDevices=A,V.videoInputDevices=R;var K=!1;"undefined"!=typeof document&&"function"==typeof document.createElement&&"setSinkId"in document.createElement("video")&&(K=!0),V.isSetSinkIdSupported=K;var $=!1;V.browser.isFirefox&&"undefined"!=typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&($=!0):V.browser.isChrome&&"undefined"!=typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&($=!0),V.isRTPSenderReplaceTracksSupported=$;var Z=!1;V.browser.isFirefox&&V.browser.version>38&&(Z=!0),V.isRemoteStreamProcessingSupported=Z;var ee=!1;"undefined"!=typeof MediaStreamTrack&&"applyConstraints"in MediaStreamTrack.prototype&&(ee=!0),V.isApplyConstraintsSupported=ee;var te=!1;V.browser.isFirefox&&V.browser.version>=43&&(te=!0),V.isMultiMonitorScreenCapturingSupported=te,V.isPromisesSupported=!!("Promise"in window),V.version="1.3.9",void 0===V&&(window.DetectRTC={});var ne=window.MediaStream;void 0===ne&&"undefined"!=typeof webkitMediaStream&&(ne=webkitMediaStream),V.MediaStream=void 0!==ne&&"function"==typeof ne&&Object.keys(ne.prototype),"undefined"!=typeof MediaStreamTrack?V.MediaStreamTrack=Object.keys(MediaStreamTrack.prototype):V.MediaStreamTrack=!1;var re=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;V.RTCPeerConnection=void 0!==re&&Object.keys(re.prototype),window.DetectRTC=V,e.exports=V,void 0===(o=function(){return V}.apply(t,[]))||(e.exports=o)}()}).call(this,n(94),n(20))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&p())}function p(){if(!l){var e=s(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}])}));
//# sourceMappingURL=vchat-player.js.map